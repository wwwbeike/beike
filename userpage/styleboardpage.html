<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<title>StyleBoard</title>
	<script type="text/javascript" src="../js/jquery-1.11.2.js"></script>
	
	<script type="text/javascript" src='../js/XUtil/XUtil.js'></script>
	<script type="text/javascript" src='../js/XUtil/base.js'></script>
	<script type="text/javascript" src='../js/XUtil/waterfall.js'></script>
	<link rel='stylesheet' type="text/css" href='../js/XUtil/XUtil.min.css'/>
	
	<script type="text/javascript"  charset="UTF-8" src='../js/Native/hoverEvent.js'></script>
	<script type="text/javascript" src='../js/Native/returnToTop.js'></script>
	
	<link rel="stylesheet" type="text/css" href="../css/common.css"/>
	<link rel="stylesheet" type="text/css" href="../css/layout.css"/>
	
	<link rel="stylesheet" type="text/css" href="../css/collect.css"/>
	<link rel="stylesheet" type="text/css" href="../css/followBoard.css"/>
	<link rel="stylesheet" type="text/css" href="../css/dialog.css"/>
	
	<script type="text/javascript" src="../js/dropzone/dropzone_huaban.js"></script>
	<link rel="stylesheet" href="../js/dropzone/basic.css" >
	<link rel="stylesheet" href="../js/dropzone/dropzone.css">
	
	
</head>
<body>
	<div id="page">
		<div id="header">
			<div id="headWapper" >
				<a id="logo" href="#"></a>
				<div id="menu_bar" >	
					<div id="left_menu">
						<div  id="left_menu_nav" class="nav menu_nav">
							<a href="#" class="nav_link">
								<div class="nav_icon"></div>
								<div class="arrow"></div>
							</a>
							<div  class="menu new-header-main-menu">
								<div class="inner">
									<div class="left_module">
										<a href="http:www.baidu.com" rel="nofollow" class="main_link bold latest_collect">最新采集</a>
										<a href="/all/" rel="nofollow" class="main_link bold wedding_style">婚礼风格板</a>
										<a href="/all/videos/" rel="nofollow" class="main_link bold videos ">视频</a>
										<a href="/all/videos/" rel="nofollow" class="main_link bold wedding_classify with_line ">婚礼分类</a>
										<a href="/all/videos/" rel="nofollow" class="main_link bold activities with_line ">活动</a>
									</div>
									<div class="right_module">
										<div class="row_0">
											<div class="module_group">
												<a href="" rel="nofollow">新房布置</a>
											</div>
											<div class="module_group">
												<a href="/favorite/culture_china//" rel="nofollow">签到台</a>
												<a href="/favorite/travel_places/" rel="nofollow">迎宾喷绘</a>
												<a href="/favorite/food_drink/" rel="nofollow">楼梯扶手</a>
												<a href="/favorite/diy_crafts/" rel="nofollow">照片展示区</a>
												<a href="/favorite/wedding_events/" rel="nofollow">迎宾小区</a>
												<a href="/favorite/apparel/" rel="nofollow">迎宾水牌</a>
											</div>
										</div>
										<div class="row_1">
											<div class="module_group">
												<a href="" rel="nofollow">酒店户外</a>
											</div>
											<div class="module_group">
												<a href="/favorite/industrial_design/" rel="nofollow">纱幔背景</a>
												<a href="/favorite/illustration/" rel="nofollow">喷绘背景</a>
												<a href="/favorite/design/" rel="nofollow">LED背景</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">镜面T台</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">普通T台</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">拱门</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">桌花</a>	
											</div>
										</div>
										
										<div class="row_2">
											<div class="module_group">
												<a href="" rel="nofollow">大场景照片</a>
											</div>
											<div class="module_group">
												<a href="/favorite/industrial_design/" rel="nofollow">地引</a>
												<a href="/favorite/illustration/" rel="nofollow">路引</a>
												<a href="/favorite/design/" rel="nofollow">花房</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">吊装饰品</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">椅背装饰</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">花车装饰</a>
												<a href="/favorite/web_app_icon/" rel="nofollow">手捧花</a>	
											</div>
										</div>

									</div>
									<div class="clear"></div>
								</div>
								<div class="bottom_bar">
									<a href="" class="tool_icon">贝壳采集工具</a>
									<div class="menu_tool_links">
										<a href="" class="about_us">关于贝壳</a>
										<a href="" class="join_us">加入我们</a>
										<a href="" class="feedback">用户反馈</a>
										<a href="" class="friendly_link">友情链接</a>
									</div>
								</div>
								<div class="up_arrow"></div>
							</div>
						</div>
					
						<form id="search_form" method="get" action="#" class="searching-unit">
							<input id="query" type="text" size="27" name="search" autocomplete="off" placeholder="搜索你喜欢的" value="">
							<a href="#" onclick="return false;" class="go"></a>
						</form>
					</div>
					<div id="right_menu">
						<div id="add_nav" class="nav add_nav">
							<a href="#" class="nav_link" title="添加">
								<div class="nav_icon"></div>
							</a>
							<div class="menu">
								<div class="add_group">
									<a href="#">上传图片采集<i class="upload"></i></a>
								</div>
								<div class="add_group">
									<a href="#">添加风格板<i class="add_board"></i></a>
								</div>
								<div class="add_group">
									<a href="#">安装采集工具<i class="goodies"></i><span>从任何页面采集图片和视频</span></a>
								</div>
								<div class="arrow"></div>
							</div>
						</div>
						
						<div id="message_nav" class="nav">
							<a href="#" class="nav_link" title="通知">
								<div class="nav_icon"></div>
								<div class="num hidden">0</div>
							</a>
							<div id="message_popup">
								<div class="bar">
									<div id="mentions" boxer=".box_mentions" class="left barTitle click">消息</div>
									<div id="activities" boxer=".box_activities" class="right barTitle ">动态</div>
								</div>
								<div id="boxer">
									<div class="box box_mentions ">
										<div class="empty">没有消息</div>
									</div>
									<div class="box box_activities hidden">
										<div class="item">没有动态</div>
									</div>
								</div> 
								<a href="/message/?type=activities" class="show_all">查看所有消息»</a>
								<div class="triangle"></div>
							</div>
						</div>
						<div id="user_nav" class="nav">
							<a href="#" class="nav_link">
								<img width="20" height="20" src="../image/user.png" class="user_photo">
								<div class="arrow"></div>
							</a>
							<div class="menu">
								<div class="user_group">
									<a href="#" >我的贝壳<i class="mine"></i></a>							
								</div>
								<div class="user_group">
									<a href="#" >账号设置<i class="settings"></i></a> 
									<a href="#" >退出登录<i class="exit"></i></a> 	
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="user_page">
			<div  id="pageWapper" >
				<div id="styleBoard_card">
					<div class="inner">
						<div class="head_line">
							<h1 class="board_name">科比布莱恩特</h1>
							<div class="board_category"><span>所属分类：</span><a href="#" class="brown_link">篮球</a></div>
						</div>
						<div class="action_buttons">
							<a id="editBoardBtn" href="#" class="btn">
								<span class="text">编辑画板</span>
							</a>
							<a id="batchManageBtn" href="#" class="btn">
								<span class="text">批量管理采集</span>
							</a>
							<div id="share_unit">
								<span>分享</span>
								<div class="share_btns">
									<a data-to="weibo" title="新浪微博" target="_blank" href="#" class="share_btn weibo"></a>
									<a data-to="qzone" title="QQ空间" target="_blank" href="#" class="share_btn qzone"></a>
									<a data-to="weixin" title="微信" target="_blank" href="#" class="share_btn weixin"></a>
									<div class="more">
										<div class="triangle"></div>
										<div id="menu">
											<a data-to="tqq" title="腾讯微博" target="_blank" href="#" class="tqq"><i></i>腾讯微博</a>
											<a data-to="qfriends" title="QQ好友" target="_blank" href="#" class="qq"><i></i>QQ 好友</a>
											<a data-to="douban" title="豆瓣" target="_blank" href="#" class="douban"><i></i>豆瓣</a>
											<a data-to="renren" title="人人网" target="_blank" href="#" class="renren"><i></i>人人网</a>
										</div>
									</div>
								</div>
							</div>
							<a id ="finishBtn" class="btn" style="display: none;">
								<span class="text">完成</span>
							</a>
							<a id="deleteBtn" class="btn" style="display: none;">
								<span class="text">删除</span>
							</a>
							<a id="moveBtn" class="btn" style="display: none;">
								<span class="text">移动至...</span>
							</a>
						</div>
					</div>
					<div class="bar">
						<a href="#" class="user_unit">
							<img src="../image/1.jpg">
							<span class="name">名门冰夜</span>
						</a>
						<div class="tabs">
							<a href="#" id ="collect_tab" class="tab ">2采集</a>
							<a href="#" id ="follow_tab" class="tab ">被0人关注</a>
						</div>
					</div>
				</div>
				
				<div id="collects" class="waterfall">
				</div>
				<div id="followers" class="waterfall">
				</div>
				<div id="more">
				</div>
			</div>
		</div>

		<div class="loading">
			<img src="../image/personal_loading_end.png" />
		</div>
	</div>
	
	<div id="elevator_item">
		<a id="elevator" title="回到顶部"></a>
	</div>
	
	<div class="dialog-boxes">
		<div class="dialog-overlay" style="display: none;"></div>
		<div id="image_upload" data-name="upload" class="dialog-box" style="display: none;">
			
			<div class="box-title">上传采集</div>
			
			<div class="box-inner">
			
				<div class="upload-area">
					<div class="normal">
						<a href="#" onclick="return false;" class="upload-btn btn btn18">
							<span class="text"> 上传采集</span>
						</a>
						<div style="margin-top: 25px" class="note">
							也可以拖拽图片到该区域，完成上传
						</div>
						<div style="margin: 10px 0 25px" class="sub">
							支持单张 10m 以内图片上传
						</div>
						<div style="margin-top: 20px; font-size: 12px" class="sub">
							[提示]请严格遵守保密法律法规，严禁在互联网上存储、处理、传输、发布涉密信息
						</div>
					</div>
					
					<div style="display: none" class="draging">
						<div class="note">释放鼠标以上传</div>
					</div>
					
					<div style="display: none" class="uploading">
						<div class="animate">上传中...</div>
					</div>
					
					<div class="dropzone dz-clickable">
						<div class="dz-default dz-message">
							<span>拖动文件到这里上传</span>
						</div>
					</div>
				
				</div>
				
				<div class="links">
					<div class="part">
						<a target="_blank" href="#" class="brown-link">安装采集工具</a>
						<div class="description">一键采集互联网上的任意图片</div>
					</div>
					<div class="part">
						<a href="#" class="brown-link">在站内逛逛</a>
						<div class="description">点击采集按钮，一键转采喜欢的图片</div>
					</div>
				</div>
			</div>
			
			<div class="close-btn">
				<i></i>
			</div>
		
		</div>
	</div>
	<script type="text/javascript">
				
		var boardNum=4;
		var waterfall="collects";
		
		function refreshPage()
		{
			if(waterfall=="collects")
			{
				$("#collects").empty();
				showCollects();
			}			
			else
			{
				$("#followers").empty();
				showFollowers();
			}		
		}
		
		function showActions()
		{
			$("#collects").delegate("div.collect img","mouseover",function(){
					$(this).css('opacity','0.8');
					$(this).parents(".collect").find(".actions").show();
				});
			$("#collects").delegate("div.collect img","mouseout",function(){
					$(this).css('opacity','1.0');
					$(this).parents(".collect").find(".actions").hide();
			    });
		}
		
		function showSelect()
		{
			$("#collects").delegate("div.collect[ischeck=no]","mouseover",function(){
					$(this).find(".collect_overlay").show();
				});
				$("#collects").delegate("div.collect[ischeck=no]","mouseout",function(){
					$(this).find(".collect_overlay").hide();
				});
		}
		
		function removeSelect()
		{
			$("#collects").undelegate("div.collect","mouseover",function(){
					$(this).find(".collect_overlay").show();
				});
				$("#collects").undelegate("div.collect","mouseout",function(){
					$(this).find(".collect_overlay").hide();
				});
		}
		
		function showCollects()
		{
			var testCollects = [];
			var imgs=["../image/1.jpg","../image/2.jpg","../image/3.jpg","../image/4.jpg",];
			var descriptions = ["科比总得分超越乔丹 : 北京时间12月15日，科比其生涯总得分正式超越乔丹，上升到历史第三位。",
								"乔丹科比经典老照片 : 一起来看看乔丹与科比相遇那些年的老照片。",
								"艾弗森的一个持球，四个人成为了背影；一个假动作，过邓肯，科比，麦迪，飞卡特，虽然你远离我们的视线，但是我们永远不会忘记~ http://t.cn/8kMXKTK ",
								"科比完成肩袖修复手术，缺阵9个月每当你们这些媒体说他完了，他就会回来证明给你们看。我想这是他最大的特点。这个赛季他已经证明了自己还能打球，他还是联盟里面最好的球员之一。"];
			for (var i = 0; i < 20; i++) {
				var model = {
					index:i,
					imgUrl: imgs[i%4],
					height: 350,
					description:descriptions[i%4],
					repin: Math.floor(Math.random()*10),
					loved: Math.floor(Math.random()*10),
					source:"http://www.baidu.com"
				}
				testCollects.push(model);
			}

			var xwf = XUtil.XWaterfall({
				src: testCollects,
				initialSize: 50,
				colNum: boardNum,
				colWidth: 252,
				contentWidth: 252,
				fetchSize: 20,
				marginTop: 16,
				url: '',
				renderTo: $('#collects')[0],
				renderer: function (model) {
					var html;
					if( model.index==0 )
					{
						html="<div class='addCollect'><div class='inner'><i></i><span>添加采集</span></div></div>";
					}
					else 
					{
						 html ="<div class='collect' ischeck='no'><div class='actions'><a href='#' class='btn left'><span class='text'>采集</span></a>"+
							   "<a href='#' class='btn right'><span class='text'>编辑</span></a></div>"+
							   "<a href='#' class='link'><img src='"+model.imgUrl+"' height='"+model.height+"'>"+
							   "<div class='collect_overlay' ><i class='btn_select'></i></div></a>"+
							   "<p class='description'>"+model.description+"</p>"+
							   "<p class='extra'><span class='repin'><i></i>"+model.repin+"</span><span ><i></i>"+model.loved+"</span></p>"+
							   "<div class='source'><a href='"+model.source+"'>"+model.source+"</a></div>";
					}
					return html;
				}
			});

			xwf.init();
		}
		
		function showFollowers()
		{
			var testFollowers = [];
			var imgs=["../image/1.jpg","../image/2.jpg","../image/3.jpg","../image/4.jpg",];
			for (var i = 0; i < 20; i++) {
				var model = {
					followName: "吃醋小王子",
					followImg: imgs[i%4],
					boardNum: Math.floor(Math.random()*10),
					collectNum: Math.floor(Math.random()*10),
					firstImg: imgs[i%4],
					secondImg: imgs[i%4],
					thirdImg: imgs[i%4],
				}
				testFollowers.push(model);
			}

			var xwf = XUtil.XWaterfall({
				src: testFollowers,
				initialSize: 50,
				colNum: boardNum,
				colWidth: 252,
				contentWidth: 252,
				fetchSize: 20,
				marginTop: 16,
				url: '',
				renderTo: $('#followers')[0],
				renderer: function (model) {
					var html="<div  class='followBoard' ><a href='#' title='"+model.followName+"' class='img'>"+
							 "<img src='"+model.followImg+"' class='followImg'></a><a href='#' class='followName'>"+model.followName+"</a>"+
						     "<div class='followInfo'><span>"+model.boardNum+" 画板</span><span>"+model.collectNum+" 采集</span></div>"+
							 "<div class='collects'><a href='#' class='img'><img src='"+model.firstImg+"' width='70' height='70'></a>"+
							 "<a href='#' class='img'><img src='"+model.secondImg+"' width='70' height='70'></a>"+
							 "<a href='#' class='img'><img src='"+model.thirdImg+"' width='70' height='70'></a></div>"+
						     "<div class='btnBar'><a  href='#' class='btn'><i></i><span class='text'> 关注</span></a></div></div>";
					return html;
				}
			});

			xwf.init();
		}
		
		$(document).ready(function(){
	
	
			/*
			*header栏消息接收里Tab切换
			*/
			$("#mentions").click(function(){
				$(".box_mentions").removeClass("hidden");
				$(".box_activities").addClass("hidden");
				$("#mentions").addClass("click");
				$("#activities").removeClass("click");
				$(".show_all").html("查看所有消息>>");
		
			});
			$("#activities").click(function(){
				$(".box_activities").removeClass("hidden");
				$(".box_mentions").addClass("hidden");
				$("#activities").addClass("click");
				$("#mentions").removeClass("click");
				$(".show_all").html("查看所有动态>>");
			});
			//根据屏幕分辨率加载不同的layout样式，设置风格板个数
			if(screen.width>=1600) 
			{
				$("#headWapper").addClass("wrapper1600");
				$("#pageWapper").addClass("wrapper1600");
				boardNum=6;
			}
			else if( screen.width>=1360 )
			{
				$("#headWapper").addClass("wrapper1360");
				$("#pageWapper").addClass("wrapper1360");
				boardNum=5;
			}	
			else 
			{
				$("#headWapper").addClass("wrapper1280");
				$("#pageWapper").addClass("wrapper1280");
				boardNum=4;
			}
			window.onresize = function()
			{
				var flag=false;
				if(window.innerWidth>=1600)
				{
					$("#headWapper").removeClass();
					$("#pageWapper").removeClass();
					$("#headWapper").addClass("wrapper1600");
					$("#pageWapper").addClass("wrapper1600");
					if(boardNum!=6)
					{
						boardNum=6;
						flag=true;
					}
					if(flag) refreshPage();
				}
				else if(window.innerWidth>=1360)
				{
					$("#headWapper").removeClass();
					$("#pageWapper").removeClass();
					$("#headWapper").addClass("wrapper1360");
					$("#pageWapper").addClass("wrapper1360");
					if(boardNum!=5)
					{
						boardNum=5;
						flag=true;
					}
					if(flag) refreshPage();
				}
				else 
				{
					$("#headWapper").removeClass();
					$("#pageWapper").removeClass();
					$("#headWapper").addClass("wrapper1280");
					$("#pageWapper").addClass("wrapper1280");
					if(boardNum!=4)
					{
						boardNum=4;
						flag=true;
					}
					if(flag) refreshPage();
				}
			}
			
			//风格设置
			headerHover();
			styleBoardPageHover();
			showActions();
			returnToTop();
			
			//tabs切换
			$("#collect_tab").click(function(){
				$("#collect_tab").addClass("active");
				$("#follow_tab").removeClass("active");
				$("#followers").hide();
				$("#collects").show();
				showCollects();
				waterfall="collects";
			});
			$("#follow_tab").click(function(){
				$("#follow_tab").addClass("active");
				$("#collect_tab").removeClass("active");
				$("#collects").hide();
				$("#followers").show();
				showFollowers();
				waterfall="followers";
			});
			$("#collect_tab").click();
			
				
			// 批量管理采集
			$("#batchManageBtn").click(function(){
				$("#editBoardBtn").hide();
				$(this).hide();
				$("#share_unit").hide();
				$("#finishBtn").show();
				$("#deleteBtn").show();
				$("#moveBtn").show();
				$("#collects").undelegate();
				showSelect();
				$("#collects").delegate("div.collect","click",function(){
					var state = $(this).attr("ischeck");
					if(state=='no')
					{
						$(this).attr("ischeck","yes");
						$(this).find("div.collect_overlay i").css('background-position','0 -40px');
					}
					else 
					{
						$(this).attr("ischeck","no");
						$(this).find("div.collect_overlay i").css('background-position','0 0');
					}
				});
			});
			$("#finishBtn").click(function(){
				$("div.collect_overlay").hide();
				$(this).hide();
				$("#deleteBtn").hide();
				$("#moveBtn").hide();
				$("#editBoardBtn").show();
				$("#batchManageBtn").show();
				$("#share_unit").show();
				$("#collects").undelegate();
				showActions();	
			});
			
			// dropzone
			$("div.dropzone").dropzone({ url: "#" });
		
			// 添加采集
			$("div.addCollect").click(function(){
				$(".dialog-boxes>div").show();
			});
			
			$("div.close-btn").click(function(){
				$(".dialog-boxes>div").hide();
			});
			
			$("div.dialog-overlay").click(function(){
				$(".dialog-boxes>div").hide();
			});
		});
	</script>
</body>
</html>